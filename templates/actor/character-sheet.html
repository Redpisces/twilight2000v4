<form class="{{cssClass}} flexcol" autocomplete="off">
  {{!-- Sheet Head --}}
  <head>
    <style>
      .item{
        display: flex;
        align-items: center;
      }
      input[type=number]{
        text-align:center;
      }
      select{
        text-align:center;
      }
      .bio-grid{
        display:grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 5px;
        background-color: rgba(0,0,0,0.10);
        margin-bottom:10px;
        border: 3px solid rgba(0,0,0,0.70);
      }
      .bio-grid .system{grid-column:1;}
      .bio-grid .name{grid-column:2;}
      .bio-grid .nation{grid-column:3/5;}
      .bio-grid .branch{grid-column:1;}
      .bio-grid .apperance{grid-column:2/5;}
      .bio-grid .rank{grid-column:1;}
      .bio-grid .code{grid-column:2/5;}
      .bio-grid .buddy{grid-column:1;}
      .bio-grid .dream{grid-column:2/4;}
      .bio-grid .exp{
        grid-column:4;
        grid-row:4/6;
      }
      .bio-grid .meet{grid-column:1/4;}
      .skill-group{
        border: 3px solid rgba(0,0,0,0.70);
        margin-bottom:10px;
        background: rgba(0,0,0,0.10); 
      }
      .skill-grid{
        display:grid;
        grid-template-columns: 2.5fr 0.75fr 0.75fr 2.5fr 0.75fr 0.75fr 2.5fr 0.75fr 0.75fr 2.5fr 0.75fr 0.75fr;
        grid-auto-rows: minmax(32px, auto);
      }
      .skill-grid .item{
        width:100%;
        height:100%;
        border: 1px solid rgba(0,0,0,0.20);
        align-items: center;
      }
      .center-h{
        text-align: center;
        justify-content: center;
      }
      
      .combat-grid{
        display:grid;
        width:100%;
        grid-template-columns: 4fr 1fr 5fr 3fr 1fr 3fr 1fr;
        background-color: rgba(0,0,0,0.10);
        margin-bottom:10px;
        border: 3px solid rgba(0,0,0,0.70);
        grid-auto-rows: minmax(32px, 32px);
      }
      .combat-grid .item{
        width:100%;
        height:100%;
        border: 1px solid rgba(0,0,0,0.20);
        align-items: center;
        overflow:hidden;
      }
      
      .damage-subgrid{
        display:grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        grid-auto-rows: minmax(auto, auto);
        width:100%;
        height:100%;
        padding:3px;    
      }
      .damage-subgrid .item{
        width:100%;
        height:100%;
        
        display: grid;
        align-items: baseline;
        border: none;
      }
      .grid-container .heading{
        background-color: rgba(0,0,0,0.50);
        background: rgba(0,0,0,0.50);
        color:#DDD;
      }
      
      .gear-grid{
        display:grid;
        width:100%;
        grid-template-columns: 1fr 1fr;
        background-color: rgba(0,0,0,0.10);
        margin-bottom:10px;
        border: 3px solid rgba(0,0,0,0.70);
        grid-auto-rows: minmax(32px, 32px);
      }
      .gear-grid .item{
        width:100%;
        height:100%;
        border: 1px solid rgba(0,0,0,0.20);
        align-items: center;
        overflow:hidden;
      }
      .weapons td{
        text-align: center;
        vertical-align: middle;
      }
      .weapons h3{
        margin:0px;
      }
      .weapons .item-image{
        margin:0px;
        width:24px;
        height:24px;
      }
      
    </style>
  </head>
  <header style="height:auto;flex:0">
    <h1 class="charname"><input name="name" type="text" value="{{actor.name}}" placeholder="Name"/></h1>
  </header>
  {{!-- Sheet Tab Navigation --}}
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="description">Description</a>
        <a class="item" data-tab="skills">Stats</a>
        <a class="item" data-tab="gear">Gear</a>
    </nav>
  {{!-- Sheet Body --}}
  <section class="sheet-body">
  
  {{!-- Biography Tab --}}
  <div class="tab biography" data-group="primary" data-tab="description">
    <div class="grid-container bio-grid">
      <div class="item heading system" style="display: flex;align-items: center;justify-content: center;">Twilight:2000</div>
      
      <div class="item name">Name:<input name="data.bio.name" type="text" value="{{data.bio.name}}" placeholder="Name" /></div>
      
      <div class="item nation">Nation:<input name="data.bio.nation" type="text" value="{{data.bio.nation}}" placeholder="Nation" /></div>
      
      <div class="item branch">Branch:<input name="data.bio.branch" type="text" value="{{data.bio.branch}}" placeholder="Branch" /></div>
      
      <div class="item apperance">Apperance:<input name="data.bio.apperance" type="text" value="{{data.bio.apperance}}" placeholder="Apperance" /></div>
      
      <div class="item rank">Rank:<input name="data.bio.rank" type="text" value="{{data.bio.rank}}" placeholder="Rank" /></div>
      
      <div class="item code">Moral Code:<input name="data.bio.code" type="text" value="{{data.bio.code}}" placeholder="Code" /></div>
      
      <div class="item buddy">Buddy:<input name="data.bio.buddy" type="text" value="{{data.bio.buddy}}" placeholder="Buddy" /></div>
      
      <div class="item dream">Big Dream:<input name="data.bio.dream" type="text" value="{{data.bio.dream}}" placeholder="Dream" /></div>
      
      
      <div class="item meet">How You Met the Group:<input name="data.bio.meet" type="text" value="{{data.bio.meet}}" placeholder="" /></div>
      
      <table class="item exp">
        <tr>
          <th colspan=2>Experience<th>
        </tr>
        <tr>
          <td>
            <div class="flexrow">
              <span>Current:</span>
              <input name="data.exp.current" type="number" value="{{data.exp.current}}" data-dtype="number" style="width:50%;float: right;"/>
            </div>
          </td>
          <td>
            <div class="flexrow">
              <span>Total:</span>
              <input name="data.exp.total" type="number" value="{{data.exp.total}}" data-dtype="number"/>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
  {{!-- Skill Tab --}}
  <div class="tab skills" data-group="primary" data-tab="skills">
    <div class="skill-group">
      <div class="grid-container skill-grid">
        <label class="item heading" style="grid-row:1;grid-column:1/span 13;border-bottom:none;">Attributes &amp; Skills</label>
      
        {{#each data.attributes as |attribute akey|}}
        <div class="item heading" style="grid-row:2;grid-column:{{math (math @index '*' 3) '+' 1}};border-top:none;" > </div>
        <div class="item center-h heading" style="grid-row:2;grid-column:{{math (math @index '*' 3) '+' 2}};border-top:none;" >Rating</div>
        <div class="item center-h heading" style="grid-row:2;grid-column:{{math (math @index '*' 3) '+' 3}};border-top:none;" >Base Die</div>
        
        
        <label class="item" data-attribute="{{akey}}" style="grid-row:3;grid-column:{{math (math @index '*' 3) '+' 1}};">{{attribute.name}}</label>
        <div class="item center-h" style="grid-row:3;grid-column:{{math (math @index '*' 3) '+' 2}};">
          <select class="die-select" name="data.attributes.{{akey}}.rating">
            {{#select attribute.rating}}
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
            {{/select}}
          </select>
        </div>
        <label class="item center-h" style="grid-row:3;grid-column:{{math (math @index '*' 3) '+' 3}};">{{attribute.die}}</label>
        
        {{#each attribute.skills as |skill skey|}}
        <label class="item" data-skill="{{skey}}" data-attribute="{{akey}}" style="grid-row:{{math @index '+' 4}};grid-column:{{math (math @../index '*' 3) '+' 1}};" >{{skill.name}}</label>
        <div class="item center-h" style="grid-row:{{math @index '+' 4}};grid-column:{{math (math @../index '*' 3) '+' 2}};" >
          <select class="die-select" name="data.attributes.{{akey}}.skills.{{skey}}.rating">
            {{#select skill.rating}}
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
              <option value="F">F</option>
            {{/select}}
          </select>
        </div>
        <label class="item center-h" style="grid-row:{{math @index '+' 4}};grid-column:{{math (math @../index '*' 3) '+' 3}};">{{skill.die}}</label>
        {{/each}}
        
        {{/each}}
      
      </div>
      <div style="min-height:32px;padding:3px;">Specialties:</div>
    </div>

    <div class="grid-container combat-grid">
      <div class="item heading" style="grid-column:1/4;">Combat</div>
      <div class="item heading" style="grid-column:4;">Armor</div>
      <div class="item heading" style="grid-column:5;">Rtg</div>
      <div class="item heading" style="grid-column:6/8;">Conditions</div>
      
      <div class="item grid-container damage-subgrid" style="grid-column:1/3;grid-row:2/4;">
        <label class="item" style="grid-row:1; grid-column:1/5;">Damage:</label>
        <label class="item" style="grid-row:2; grid-column:1;">Hits:</label>
        <input class="item" style="grid-row:2; grid-column:2;" type="number" data-dtype="Number" name="data.damage.value" value="{{data.damage.value}}"/>
        <label class="item" style="grid-row:2; grid-column:3;">Max:</label>
        <input class="item" style="grid-row:2; grid-column:4;" type="number" data-dtype="Number" name="data.damage.max" value="{{data.damage.max}}"/>
      </div>
      
      <div class="item grid-container damage-subgrid" style="grid-column:3;grid-row:2/4;">
        <label class="item" style="grid-row:1; grid-column:1/5;">Stress:</label>
        <label class="item" style="grid-row:2; grid-column:1;">Stress:</label>
        <input class="item" style="grid-row:2; grid-column:2;" type="number" data-dtype="Number" name="data.stress.value" value="{{data.stress.value}}"/>
        <label class="item" style="grid-row:2; grid-column:3;">Max:</label>
        <input class="item" style="grid-row:2; grid-column:4;" type="number" data-dtype="Number" name="data.stress.max" value="{{data.stress.max}}"/>
      </div>
      
      <div class="item" style="grid-row:2; grid-column:4;">Head</div>li
      <div class="item" style="grid-row:3; grid-column:4;">Arms</div>
      <div class="item" style="grid-row:4; grid-column:4;">Torso</div>
      <div class="item" style="grid-row:5; grid-column:4;">Legs</div>
      
      <input class="item" style="grid-row:2; grid-column:5;" type="number" data-dtype="Number" name="data.armor.head" value="{{data.armor.head}}"/>
      <input class="item" style="grid-row:3; grid-column:5;" type="number" data-dtype="Number" name="data.armor.arms" value="{{data.armor.arms}}"/>
      <input class="item" style="grid-row:4; grid-column:5;" type="number" data-dtype="Number" name="data.armor.torso" value="{{data.armor.torso}}"/>
      <input class="item" style="grid-row:5; grid-column:5;" type="number" data-dtype="Number" name="data.armor.legs" value="{{data.armor.legs}}"/>
      
      <label class="item" style="grid-row:4; grid-column:1;">Hit Capacity:</label>
      <label class="item" style="grid-row:5; grid-column:1;">Stress Capacity:</label>
      <label class="item" style="grid-row:6; grid-column:1;">Coolness under fire:</label>
      <label class="item" style="grid-row:7; grid-column:1;">Unit Morale:</label>
      
      <input class="item" style="grid-row:4; grid-column:2;" type="number" data-dtype="Number" name="data.hit_capacity" value="{{data.hit_capacity}}"/>
      <input class="item" style="grid-row:5; grid-column:2;" type="number" data-dtype="Number" name="data.stress_capacity" value="{{data.stress_capacity}}"/>
      
      <select class="item die-select" style="grid-row:6; grid-column:2;" name="data.cuf.rating">
        {{#select data.cuf.rating}}
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        {{/select}}
      </select>
      <select class="item" style="grid-row:7; grid-column:2;" name="data.morale.rating">
        {{#select data.morale.rating}}
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
        {{/select}}
      </select>
      
      <div class="item" style="grid-row:4/6; grid-column:3;">Critical Injuries</div>
      <div class="item" style="grid-row:6/8; grid-column:3;">Diseases</div>
      
      <label class="item" style="grid-row:2; grid-column:6;">Starving:</label>
      <label class="item" style="grid-row:3; grid-column:6;">Dehydrated:</label>
      <label class="item" style="grid-row:4; grid-column:6;">Sleep Dep:</label>
      <label class="item" style="grid-row:5; grid-column:6;">Hypothermic:</label>
      
      <div class="item" style="grid-row:2; grid-column:7;"><input class="checkbox" type="checkbox" name="data.conditions.starving" {{checked data.conditions.starving}}/></div>
      <div class="item" style="grid-row:3; grid-column:7;"><input class="checkbox" type="checkbox" name="data.conditions.dehydrated" {{checked data.conditions.dehydrated}}/></div>
      <div class="item" style="grid-row:4; grid-column:7;"><input class="checkbox" type="checkbox" name="data.conditions.sleep_dep" {{checked data.conditions.sleep_dep}}/></div>
      <div class="item" style="grid-row:5; grid-column:7;"><input class="checkbox" type="checkbox" name="data.conditions.hypothermic" {{checked data.conditions.hypothermic}}/></div>
      
      <label class="item heading" style="grid-row:6; grid-column:4/8;">Radiation:</label>
      <label class="item" style="grid-row:7; grid-column:4;">Current:</label>
      <input class="item" style="grid-row:7; grid-column:5;" type="number" data-dtype="Number" name="data.radiation.temporary.value" value="{{data.radiation.temporary.value}}"/>
      <label class="item" style="grid-row:7; grid-column:6;">Permanent:</label>
      <input class="item" style="grid-row:7; grid-column:7;" type="number" data-dtype="Number" name="data.radiation.permanent.value" value="{{data.radiation.permanent.value}}"/>
    </div>
  </div>
  {{!-- Gear Tab --}}
  <div class="tab gear" data-group="primary" data-tab="gear">
    <div class="grid-container gear-grid">
      <label class="item heading" style="grid-row:1; grid-column:1/3;">Gear:</label>
      <div class="item" style="grid-row:2/span 6; grid-column:1;">
        <div style="width:100%;height:100%;align-content:top;overflow-y:scroll;">
            <ol class="items-list">
                <li class="item flexrow item-header">
                  <div class="item-image"></div>
                  <div class="item-name">Name</div>
                  <div class="item-controls">
                    <a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add item</a>
                  </div>
                </li>
            {{#each actor.gear as |item id|}}
                <li class="item flexrow" data-item-id="{{item._id}}">
                    <div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
            {{/each}}
            </ol>
        </div>
      </div>
      <div class="item" style="grid-row:2/span 6; grid-column:2;">Backpack:</div>
      <div class="item" style="grid-row:8; grid-column:1/3;">Tiny Items:</div>
      
      <div class="item weapon-subgrid" style="grid-row:9/span 6; grid-column:1/3;">
        <div style="width:100%;height:100%;align-content:top;overflow-y:scroll;overflow-x:none">
          <table class="items-list weapons">
                <tr class="">
                  <th style="width:24px;"><div class="item-image"></div></th>
                  <th><div class="item-name">Name</div></th>
                  <th><div>Rof</div></th>
                  <th><div>Damage</div></th>
                  <th><div>Crit</div></th>
                  <th><div>Armor</div></th>
                  <th><div>Range</div></th>
                  <th><div>Mag</div></th>
                  <th><div>Cap</div></th>
                  <th><div>Reliability</div></th>
                  <th><div>Blast</div></th>
                  <th><div class="item-controls">
                    <a class="item-control item-create" title="Create item" data-type="gun"><i class="fas fa-plus"></i> Add Gun</a>
                  </div></th>
                </tr>
            {{#each actor.weapons as |item id|}}
                <tr class="item" data-item-id="{{item._id}}" style="
                height: 100%;
                width: 100%;
                padding: 0px;
                border: none;
                display: revert;
                ">
                    <td><div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24"/></div></td>
                    <td><h4 class="item-name">{{item.name}}</h4></td>
                    <td><h3>{{item.data.rof}}</h3></td>
                    <td><h3>{{item.data.damage}}</h3></td>
                    <td><h3>{{item.data.crit}}</h3></td>
                    <td><h3>{{item.data.armor}}</h3></td>
                    <td><h3>{{item.data.range}}</h3></td>
                    <td><input class="embeded" style="width:32px" name="in.data.data.mag.value" value="{{item.data.mag.value}}" placeholder="mag" type="number" data-dtype="number"/></td>
                    <td><h3>{{item.data.mag.max}}</h3></td>
                    <td><select class="die-select embeded" name="in.data.data.rel.rating">
                    {{#select item.data.rel.rating}}
                      <option value="A">A</option>
                      <option value="B">B</option>
                      <option value="C">C</option>
                      <option value="D">D</option>
                      <option value="F">F</option>
                    {{/select}}
                    </select></td>
                    <td><h3>{{item.data.blast.rating}}</h3></td>
                    <td class="item-controls">
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </td>
                </tr>
            {{/each}}
            </table>
        </div>
      
      </div>
      
    </div>
  </div>
  </section>
</form>

